%global packname  TDAmapper
%global packver   1.0
%global rlibdir   /usr/local/lib/R/library

Name:             R-CRAN-%{packname}
Version:          1.0
Release:          3%{?dist}
Summary:          Analyze High-Dimensional Data Using Discrete Morse Theory

License:          GPL-3
URL:              https://cran.r-project.org/package=%{packname}
Source0:          %{url}&version=%{packver}#/%{packname}_%{packver}.tar.gz


BuildRequires:    R-devel >= 3.1.2
Requires:         R-core >= 3.1.2
BuildArch:        noarch

%description
Topological Data Analysis using Mapper (discrete Morse theory). Generate a
1-dimensional simplicial complex from a filter function defined on the
data: 1. Define a filter function (lens) on the data.  2. Perform
clustering within within each level set and generate one node (vertex) for
each cluster.  3. For each pair of clusters in adjacent level sets with a
nonempty intersection, generate one edge between vertices.  The function
mapper1D uses a filter function with codomain R, while the the function
mapper2D uses a filter function with codomain R^2.

%prep
%setup -q -c -n %{packname}


%build

%install

mkdir -p %{buildroot}%{rlibdir}
%{_bindir}/R CMD INSTALL -l %{buildroot}%{rlibdir} %{packname}

test -d %{packname}/src && (cd %{packname}/src; rm -f *.o *.so)
rm -f %{buildroot}%{rlibdir}/R.css

%files
%dir %{rlibdir}/%{packname}
%doc %{rlibdir}/%{packname}/html
%{rlibdir}/%{packname}/Meta
%{rlibdir}/%{packname}/help
%{rlibdir}/%{packname}/DESCRIPTION
%{rlibdir}/%{packname}/NAMESPACE
%{rlibdir}/%{packname}/R
%{rlibdir}/%{packname}/INDEX
